<!DOCTYPE html>

<html lang="ru" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" sizes="256x256" href="../../../_static/images/favicon.ico" type="image/x-icon">
    <title>Gotchas &#8212; Fortran Programming Language</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=96a48853" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script src="../../../_static/documentation_options.js?v=aaa2236b"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/translations.js?v=29b1f277"></script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="canonical" href="https://fortran-lang.org/en/learn/quickstart/gotchas.html" />
    <link rel="index" title="Алфавитный указатель" href="../../../genindex/" />
    <link rel="search" title="Поиск" href="../../../search/" />
    <link rel="next" title="Сборка программ" href="../../building_programs/" />
    <link rel="prev" title="Производные типы данных" href="../derived_types/" />

<meta
  name="description"
  content="Fortran : High-performance parallel programming language"
/>
<meta
  name="keywords"
  content="High-performance, parallel, programming language"
/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">
  var pr_number = -1;
  $(document).ready(function () {
    if (window.location.href.indexOf("/pr/") > -1) {
      pr_number = window.location.href.split("/").indexOf("pr") + 1;
      document.getElementById("pr").innerHTML =
        "pull request " + window.location.href.split("/")[pr_number];
      document.getElementById("pr").href =
        "https://github.com/fortran-lang/webpage/pull/" +
        window.location.href.split("/")[pr_number];
      var banner = document.getElementById("banner");
      banner.style.display = "block";
    }
  });
</script>
<div id="banner" style="display: none" class="container">
  <h3>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="feather feather-git-pull-request"
    >
      <circle cx="18" cy="18" r="3"></circle>
      <circle cx="6" cy="6" r="3"></circle>
      <path d="M13 6h3a2 2 0 0 1 2 2v7"></path>
      <line x1="6" y1="9" x2="6" y2="21"></line>
    </svg>
    <b>Site preview: </b>you are previewing unpublished changes for
    <a id="pr"></a>
  </h3>
</div>

<link
  rel="alternate"
  type="application/atom+xml"
  href="../../../news/atom.xml"
  title="Blog"
/>


<link href="True" rel="stylesheet"/>


  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../../">
  
  
  
  
  
    <p class="title logo__title">Fortran Programming Language</p>
  
</a>
    
    <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
    
    <div class="dropdown" id="version_switcher">
  <button
    type="button"
    class="btn btn-sm navbar-btn dropdown-toggle"
    id="version_switcher_button"
    data-toggle="dropdown"
  >
    ru
    <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div
    id="version_switcher_menu"
    class="dropdown-menu list-group-flush py-0"
    aria-labelledby="version_switcher_button"
  >
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables learn/quickstart/gotchas and {'json_url': 'https://fortran-lang.org/', 'version_match': 'ru'}.
-->

<script type="text/javascript">
  // Check if corresponding page path exists in other version of docs
  // and, if so, go there instead of the homepage of the other docs version
  function checkPageExistsAndRedirect(event) {
    const currentFilePath = "learn/quickstart/gotchas",
      tryUrl = event.target.getAttribute("href");
    location.href = tryUrl;
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
  }

  // Populate the version switcher from the JSON config file
  (function () {
    const currentFilePath = "learn/quickstart/gotchas";
    const indexFilePath = "../../../";
    let btn = document.getElementById("version_switcher_button");
    // Set empty strings by default so that these attributes exist and can be used in CSS selectors
    btn.dataset["activeVersionName"] = "";
    btn.dataset["activeVersion"] = "";
    // create links to the corresponding page in the other docs versions
    data = [
      {
        name: "English",
        version: "en",
        url: "",
      },
      {
        name: "bn",
        version: "bn",
        url: "bn/",
      },
      {
        name: "cs",
        version: "cs",
        url: "cs/",
      },
      {
        name: "Deutsch",
        version: "de",
        url: "de/",
      },
      {
        name: "Español",
        version: "es",
        url: "es/",
      },
      {
        name: "Français",
        version: "fr",
        url: "fr/",
      },
      {
        name: "ja",
        version: "ja",
        url: "ja/",
      },
      {
        name: "Nederlands",
        version: "nl",
        url: "nl/",
      },
      {
        name: "pl",
        version: "pl",
        url: "pl/",
      },
      {
        name: "Português",
        version: "pt",
        url: "pt/",
      },
      {
        name: "Русский",
        version: "ru",
        url: "ru/",
      },
      {
        name: "简体中文",
        version: "zh_CN",
        url: "zh_CN/",
      },
    ];
    // console.log(data);
    $.each(data, function (index, entry) {
      // if no custom name specified (e.g., "latest"), use version string
      if (!("name" in entry)) {
        entry.name = entry.version;
      }
      // create the node
      const node = document.createElement("a");
      node.setAttribute("class", "list-group-item list-group-item-action py-1");
      node.textContent = `${entry.name}`;


      node.setAttribute(
        "href",
        `https://fortran-lang.org/${entry.url}${currentFilePath}`,
      );

      // on click, AJAX calls will check if the linked page exists before
      // trying to redirect, and if not, will redirect to the homepage
      // for that version of the docs.
      node.onclick = checkPageExistsAndRedirect;
      // Add dataset values for the version and name in case people want
      // to apply CSS styling based on this information.
      node.dataset["versionName"] = entry.name;
      node.dataset["version"] = entry.version;

      $("#version_switcher_menu").append(node);
      // replace dropdown button text with the preferred display name of
      // this version, rather than using sphinx's  variable.
      // also highlight the dropdown entry for the currently-viewed
      // version's entry
      if (entry.version == "ru") {
        node.classList.add("active");
        btn.innerText = btn.dataset["activeVersionName"] = entry.name;
        btn.dataset["activeVersion"] = entry.version;
      }
    });
  })();
</script>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class=" collapse navbar-collapse">
    <div id="navbar-center" class="ml-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference external nav-link" href="https://play.fortran-lang.org/">
  Play
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../../">
  Обучение
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../roadmap/">
  Roadmap
  <!-- omit in toc -->
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../compilers/">
  Компиляторы
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../community/">
  Community
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../packages/">
  Packages
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../news/">
  News
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://fortran-lang.discourse.group/" rel="noopener" target="_blank" title="Discourse"><span><i class="fab fa-discourse"></i></span>
            <label class="sr-only">Discourse</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/fortranlang" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/fortran-lang" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://fortran-lang.org/en/news/atom.xml" rel="noopener" target="_blank" title="RSS"><span><i class="fas fa-rss"></i></span>
            <label class="sr-only">RSS</label></a>
        </li>
      </ul>
      </div>
      
      <div class="navbar-end-item">
        <form class="bd-search d-flex align-items-center" action="../../../search/" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Поиск" aria-label="Search" autocomplete="off" >
</form>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../os_setup/">
   Настройка вашей ОС
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../os_setup/choose_compiler/">
     Выбор компилятора
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../os_setup/install_gfortran/">
     Установка GFortran
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../os_setup/text_editors/">
     Текстовые редакторы
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../os_setup/ides/">
     IDE (Интегрированная среда разработки)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../os_setup/tips/">
     Полезные советы
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../">
   Краткое руководство
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../hello_world/">
     Hello world
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../variables/">
     Переменные
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../arrays_strings/">
     Массивы и строки
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../operators_control_flow/">
     Операторы и поток управления
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../organising_code/">
     Организация структуры кода
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../derived_types/">
     Производные типы данных
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Gotchas
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../building_programs/">
   Сборка программ
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../building_programs/compiling_source/">
     Компиляция исходного кода
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../building_programs/linking_pieces/">
     Компоновка объектов
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../building_programs/runtime_libraries/">
     Библиотеки времени выполнения
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../building_programs/include_files/">
     Подключаемые файлы и модули
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../building_programs/managing_libraries/">
     Управление библиотеками (статические и динамические библиотеки)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../building_programs/build_tools/">
     Инструменты сборки
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../building_programs/project_make/">
     Введение в систему сборки make
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../building_programs/distributing/">
     Распространение ваших программ
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../best_practices/">
   Практические рекомендации по разработке на Fortran
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../best_practices/style_guide/">
     Руководство по стилю оформления кода Fortran
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../best_practices/floating_point/">
     Числа с плавающей точкой
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../best_practices/integer_division/">
     Целочисленное деление
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../best_practices/modules_programs/">
     Модули и программы
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../best_practices/arrays/">
     Массивы
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../best_practices/multidim_arrays/">
     Многомерные массивы
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../best_practices/element_operations/">
     Элементные операции с массивами
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../best_practices/allocatable_arrays/">
     Выделяемые (динамические) массивы
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../best_practices/file_io/">
     Файловый ввод/вывод
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../best_practices/callbacks/">
     Функции обратного вызова
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../best_practices/type_casting/">
     Приведение типа в функциях обратного вызова
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../intrinsics/">
   Fortran Intrinsics
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/array/">
     Properties and attributes of arrays
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/bit/">
     Bit-level inquiry and manipulation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/character/">
     Basic procedures for manipulating
     <em>
      character
     </em>
     variables
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/compiler/">
     Information about compiler and compiler options used for building
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/cfi/">
     Procedures for binding to C interfaces
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/math/">
     General mathematical functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/model/">
     Controlling and querying the current numeric model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/numeric/">
     Manipulation and properties of numeric values
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/parallel/">
     Parallel programming using co_arrays and co_indexed arrays
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/state/">
     General and miscellaneous intrinsics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/system/">
     Accessing external system information
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/transform/">
     Matrix multiplication, dot product, and array shifts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../intrinsics/type/">
     Types and kinds
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference external" href="https://www.gnu.org/licenses/old-licenses/fdl-1.2.en.html">
     GNU Free Documentation License
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../rosetta_stone/">
   Python Fortran Rosetta Stone
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
        
<br />

<div class="tocsection onthispage">
  <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav" class="page-toc"><ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#implicit-typing">
   Implicit typing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#implied-save">
   Implied save
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#floating-point-literal-constants">
   Floating point literal constants
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#floating-point-literal-constants-again">
   Floating point literal constants (again)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#leading-space-in-prints">
   Leading space in prints
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#filename-extension">
   Filename extension
  </a>
 </li>
</ul>
</nav> 
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
<section class="tex2jax_ignore mathjax_ignore" id="gotchas">
<h1>Gotchas<a class="headerlink" href="#gotchas" title="Link to this heading">#</a></h1>
<p>Fortran syntax is generally simple and consistent, but as with many languages it has some flaws. Sometimes because of legacy reasons (the evolution of the Fortran standard strongly emphasizes the backward compatibility because of the huge amount of legacy code that is still actively used), sometimes because of real flaws (poor choice at some point, which is difficult if not impossible to correct without breaking the backward compatibility), and sometimes just because Fortran is not C or C++ or Python or whatever: it has its own logic, with features that can sometimes be surprising to developers who are used to some other languages.</p>
<p>All code snippets are compiled with gfortran 13.</p>
<section id="implicit-typing">
<h2>Implicit typing<a class="headerlink" href="#implicit-typing" title="Link to this heading">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">program</span> <span class="n">foo</span>
    <span class="n">integer</span> <span class="p">::</span> <span class="n">nbofchildrenperwoman</span><span class="p">,</span> <span class="n">nbofchildren</span><span class="p">,</span> <span class="n">nbofwomen</span>
    <span class="n">nbofwomen</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">nbofchildrenperwoman</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">nbofchildren</span> <span class="o">=</span> <span class="n">nbofwomen</span> <span class="o">*</span> <span class="n">nbofchildrenperwoman</span>
    <span class="nb">print</span><span class="o">*</span><span class="p">,</span> <span class="s2">&quot;number of children:&quot;</span><span class="p">,</span> <span class="n">nbofchildrem</span>
<span class="n">end</span> <span class="n">program</span>
</pre></div>
</div>
<p>The program compiles and the execution gives:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">number</span> <span class="n">of</span> <span class="n">children</span><span class="p">:</span>           <span class="mi">0</span>
</pre></div>
</div>
<p>Wait… Fortran is unable to multiply two integer numbers?? Of course not… The problem here is a typo in the variable name when printing it: <code class="docutils literal notranslate"><span class="pre">nbofchildreM</span></code> instead of <code class="docutils literal notranslate"><span class="pre">nbofchildreN</span></code>. But why the compiler didn’t catch the typo? Well, because by default Fortran uses implicit typing: when encountering a variable that hasn’t been explicitly typed, the compiler infers the type according to the first letter of the name. Variables names starting by I, J, K, L, M, N, are of type <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, and all other ones are of type <code class="docutils literal notranslate"><span class="pre">REAL</span></code> (hence the classic joke «<code class="docutils literal notranslate"><span class="pre">GOD</span></code> is <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, unless declared as <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>»).</p>
<p>Implicit typing is as old as Fortran, in times where there was no explicit typing. Although it can still be convenient for quickly writing some test code, this practice is highly error prone and is discouraged. The strongly recommended good practice is to always disable implicit typing by stating <code class="docutils literal notranslate"><span class="pre">implicit</span> <span class="pre">none</span></code> (introduced in Fortran 90) at the beginning of all program units (main program, modules, and standalone routines):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">program</span> <span class="n">foo</span>
<span class="n">implicit</span> <span class="n">none</span>
    <span class="n">integer</span> <span class="p">::</span> <span class="n">nbofchildrenperwoman</span><span class="p">,</span> <span class="n">nbofchildren</span><span class="p">,</span> <span class="n">nbofwomen</span>
    <span class="n">nbofwomen</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">nbofchildrenperwoman</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">nbofchildren</span> <span class="o">=</span> <span class="n">nbofwomen</span> <span class="o">*</span> <span class="n">nbofchildrenperwoman</span>
    <span class="nb">print</span><span class="o">*</span><span class="p">,</span> <span class="s2">&quot;number of children:&quot;</span><span class="p">,</span> <span class="n">nbofchildrem</span>
<span class="n">end</span> <span class="n">program</span>
</pre></div>
</div>
<p>And now the compilation fails, allowing to quickly correct the typo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    7 |     print*, &quot;number of children:&quot;, nbofchildrem
      |                                               1
Error: Symbol &#39;nbofchildrem&#39; at (1) has no IMPLICIT type; did you mean &#39;nbofchildren&#39;?
</pre></div>
</div>
</section>
<section id="implied-save">
<h2>Implied save<a class="headerlink" href="#implied-save" title="Link to this heading">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subroutine</span> <span class="n">foo</span><span class="p">()</span>
<span class="n">implicit</span> <span class="n">none</span>
    <span class="n">integer</span> <span class="p">::</span> <span class="n">c</span><span class="o">=</span><span class="mi">0</span>

    <span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">+</span><span class="mi">1</span>
    <span class="nb">print</span><span class="o">*</span><span class="p">,</span> <span class="n">c</span>
<span class="n">end</span> <span class="n">subroutine</span>

<span class="n">program</span> <span class="n">main</span>
<span class="n">implicit</span> <span class="n">none</span>
    <span class="n">integer</span> <span class="p">::</span> <span class="n">i</span>

    <span class="n">do</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span>
        <span class="n">call</span> <span class="n">foo</span><span class="p">()</span>
    <span class="n">end</span> <span class="n">do</span>
<span class="n">end</span> <span class="n">program</span>
</pre></div>
</div>
<p>People used to C/C++ expect this program to print 5 times <code class="docutils literal notranslate"><span class="pre">1</span></code>, because they interpret <code class="docutils literal notranslate"><span class="pre">integer</span> <span class="pre">::</span> <span class="pre">c=0</span></code> as the concatenation of a declaration and an assignment, as if it was:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">integer</span> <span class="p">::</span> <span class="n">c</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p><strong>But it is not</strong>. This program actually outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="mi">5</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">integer</span> <span class="pre">::</span> <span class="pre">c=0</span></code> is actually a one-shot <strong>compile time initialization</strong>, and it makes the variable persistent between calls to <code class="docutils literal notranslate"><span class="pre">foo()</span></code>. It is actually equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">integer</span><span class="p">,</span> <span class="n">save</span> <span class="p">::</span> <span class="n">c</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">save</span></code> attribute is equivalent to the C <code class="docutils literal notranslate"><span class="pre">static</span></code> attribute to make a variable persistent, and it is <em>implied</em> in the case the variable is initialized. This is a modernized syntax (introduced in Fortran 90) compared to the legacy (and still valid) syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">integer</span> <span class="n">c</span>
<span class="n">data</span> <span class="n">c</span> <span class="o">/</span><span class="mi">0</span><span class="o">/</span>
</pre></div>
</div>
<p>Old fortraners just know that the modernized syntax is equivalent to the legacy one, even when <code class="docutils literal notranslate"><span class="pre">save</span></code> is not specified. But as a matter of fact the <em>implied save</em> can be misleading to newcomers who are used to the C logic. That’s why it is generally recommended to <strong>always</strong> specify the <code class="docutils literal notranslate"><span class="pre">save</span></code> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>integer, save :: c=0   ! save could be omitted, but it&#39;s clearer with it
</pre></div>
</div>
<p><em>Note: an initialization expression of a derived type component is a fully different case:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span> <span class="n">bar</span>
    <span class="n">integer</span> <span class="p">::</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">end</span> <span class="nb">type</span>
</pre></div>
</div>
<p><em>Here, the <code class="docutils literal notranslate"><span class="pre">c</span></code> component is initialized to zero each time a <code class="docutils literal notranslate"><span class="pre">type(bar)</span></code> variable is instantiated (<strong>runtime</strong> initialization).</em></p>
</section>
<section id="floating-point-literal-constants">
<h2>Floating point literal constants<a class="headerlink" href="#floating-point-literal-constants" title="Link to this heading">#</a></h2>
<p>The following code snippet defines a double precision constant <code class="docutils literal notranslate"><span class="pre">x</span></code> (which is on most systems a IEEE754 64 bits floating point, with 15 significant digits):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">program</span> <span class="n">foo</span>
<span class="n">implicit</span> <span class="n">none</span>
    <span class="n">integer</span><span class="p">,</span> <span class="n">parameter</span> <span class="p">::</span> <span class="n">dp</span> <span class="o">=</span> <span class="n">kind</span><span class="p">(</span><span class="mi">0</span><span class="n">d0</span><span class="p">)</span>
    <span class="n">real</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">dp</span><span class="p">),</span> <span class="n">parameter</span> <span class="p">::</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">9.3</span>
    <span class="nb">print</span><span class="o">*</span><span class="p">,</span> <span class="n">precision</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">x</span>
<span class="n">end</span> <span class="n">program</span>
</pre></div>
</div>
<p>The output is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>          <span class="mi">15</span>   <span class="mf">9.3000001907348633</span>
</pre></div>
</div>
<p>So, <code class="docutils literal notranslate"><span class="pre">x</span></code> has 15 significant digits as expected, and still the printed value is wrong from the 8th digit. The reason is that floating point literal constants have implicitely the default real kind, wich is usually the IEEE754 single precision floating point (with about 7 significant digits). The real number <span class="math notranslate nohighlight">\(9.3\)</span> has no exact floating point representation, so it is first approximated to single precision up to the 7th digit, then casted to double precision before being assigned to <code class="docutils literal notranslate"><span class="pre">x</span></code>. But the previously lost digits are obviously not recovered.</p>
<p>The solution is to explicitly specify the kind of the constant:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">real</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">dp</span><span class="p">),</span> <span class="n">parameter</span> <span class="p">::</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">9.3</span><span class="n">_dp</span>
</pre></div>
</div>
<p>And now the output is correct up to the 15th digit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>          <span class="mi">15</span>   <span class="mf">9.3000000000000007</span>     
</pre></div>
</div>
</section>
<section id="floating-point-literal-constants-again">
<h2>Floating point literal constants (again)<a class="headerlink" href="#floating-point-literal-constants-again" title="Link to this heading">#</a></h2>
<p>Suppose now you need a floating point constant that is 1/3 (one-third). You may write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">program</span> <span class="n">foo</span>
<span class="n">implicit</span> <span class="n">none</span>
    <span class="n">integer</span><span class="p">,</span> <span class="n">parameter</span> <span class="p">::</span> <span class="n">dp</span> <span class="o">=</span> <span class="n">kind</span><span class="p">(</span><span class="mi">0</span><span class="n">d0</span><span class="p">)</span>
    <span class="n">real</span><span class="p">(</span><span class="n">dp</span><span class="p">),</span> <span class="n">parameter</span> <span class="p">::</span> <span class="n">onethird</span> <span class="o">=</span> <span class="mi">1</span><span class="n">_dp</span> <span class="o">/</span> <span class="mi">3</span><span class="n">_dp</span>
    <span class="nb">print</span><span class="o">*</span><span class="p">,</span> <span class="n">onethird</span>
<span class="n">end</span> <span class="n">program</span>
</pre></div>
</div>
<p>Then the output is (!):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="mf">0.0000000000000000</span>     
</pre></div>
</div>
<p>The reason is that <code class="docutils literal notranslate"><span class="pre">1_dp</span></code> and <code class="docutils literal notranslate"><span class="pre">3_dp</span></code> are <strong>integer</strong> literal constants, despite the <code class="docutils literal notranslate"><span class="pre">_dp</span></code> suffix that is <em>supposed</em> to represent a floating point kind. Consequently the division is the integer division, with 0 as a result. The gotcha here is that the standard allows compilers to use identical kind values for <code class="docutils literal notranslate"><span class="pre">REAL</span></code> and <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code> types. For instance with gfortran, on most platforms the value <span class="math notranslate nohighlight">\(8\)</span> is both the double precision kind AND the 64 bits integer kind, so that <code class="docutils literal notranslate"><span class="pre">1_dp</span></code> is a fully valid integer constant. In constrast, the NAG compiler uses by default unique kind values, such that in the example above <code class="docutils literal notranslate"><span class="pre">1_dp</span></code> would produce a compilation error.</p>
<p>The right way to denote floating point constants is to <strong>always</strong> include the point:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">real</span><span class="p">(</span><span class="n">dp</span><span class="p">),</span> <span class="n">parameter</span> <span class="p">::</span> <span class="n">onethird</span> <span class="o">=</span> <span class="mf">1.0</span><span class="n">_dp</span> <span class="o">/</span> <span class="mf">3.0</span><span class="n">_dp</span>
</pre></div>
</div>
<p>Then the ouput is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="mf">0.33333333333333331</span>     
</pre></div>
</div>
</section>
<section id="leading-space-in-prints">
<h2>Leading space in prints<a class="headerlink" href="#leading-space-in-prints" title="Link to this heading">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">program</span> <span class="n">foo</span>
<span class="n">implicit</span> <span class="n">none</span>
    <span class="nb">print</span><span class="o">*</span><span class="p">,</span> <span class="s2">&quot;Hello world!&quot;</span>
<span class="n">end</span> <span class="n">program</span>
</pre></div>
</div>
<p>Ouput:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>% gfortran hello.f90 &amp;&amp; ./a.out
 Hello world!
</pre></div>
</div>
<p>Note the extra leading space, which is not present in the string of the source code. Historically, the first character was containing a <a class="reference external" href="https://en.wikipedia.org/wiki/ASA_carriage_control_characters">carriage control code</a> for the early printers, and it was not printed per se. The space « « was instructing the printer to perform a CR+LF sequence before printing the content, and was automatically prepended by the Fortran <code class="docutils literal notranslate"><span class="pre">print*</span></code> statement. Some compilers still do that, although the modern output devices do neither intercept nor use the control character, which is hence «printed». If this leading blank is a problem (it rarely is), then instead of the <code class="docutils literal notranslate"><span class="pre">*</span></code> (which means «let the compiler decide how to format the output») we can code an explicit format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="nb">print</span> <span class="s2">&quot;(A)&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello world!&quot;</span>
</pre></div>
</div>
<p>In this case, the compiler does no longer prepend the leading space:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>% gfortran hello.f90 &amp;&amp; ./a.out
Hello world!
</pre></div>
</div>
</section>
<section id="filename-extension">
<h2>Filename extension<a class="headerlink" href="#filename-extension" title="Link to this heading">#</a></h2>
<p>Suppose we put the above «Hello world» program in the source file <code class="docutils literal notranslate"><span class="pre">hello.f</span></code>. Most compilers will produce many compilation errors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">gfortran</span> <span class="n">hello</span><span class="o">.</span><span class="n">f</span>
<span class="n">hello</span><span class="o">.</span><span class="n">f</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span>

 <span class="n">program</span> <span class="n">foo</span>
 <span class="mi">1</span>
<span class="n">Error</span><span class="p">:</span> <span class="n">Non</span><span class="o">-</span><span class="n">numeric</span> <span class="n">character</span> <span class="ow">in</span> <span class="n">statement</span> <span class="n">label</span> <span class="n">at</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">hello</span><span class="o">.</span><span class="n">f</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span>

 <span class="n">implicit</span> <span class="n">none</span>
 <span class="mi">1</span>
<span class="n">Error</span><span class="p">:</span> <span class="n">Non</span><span class="o">-</span><span class="n">numeric</span> <span class="n">character</span> <span class="ow">in</span> <span class="n">statement</span> <span class="n">label</span> <span class="n">at</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">hello</span><span class="o">.</span><span class="n">f</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span>

     <span class="nb">print</span><span class="o">*</span><span class="p">,</span> <span class="s2">&quot;Hello world!&quot;</span>
     <span class="mi">1</span>
<span class="n">Error</span><span class="p">:</span> <span class="n">Non</span><span class="o">-</span><span class="n">numeric</span> <span class="n">character</span> <span class="ow">in</span> <span class="n">statement</span> <span class="n">label</span> <span class="n">at</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="o">...</span><span class="p">[</span><span class="n">truncated</span><span class="p">]</span>
</pre></div>
</div>
<p>The reason is that the <code class="docutils literal notranslate"><span class="pre">.f</span></code> extension is by a widely accepted convention «reserved» for the legacy «fixed source form», which was designed for the punch card systems. In particular, the columns 1-6 were reserved for labels, continuation characters, and comments, and the actual statements and instructions had to be within the columns 7-72. The free source form removes all the limitations of the fixed source form, but since the latter cohabits with the former, the convention adopted by most compilers is to use by default the <code class="docutils literal notranslate"><span class="pre">.f90</span></code> extension for the free form sources. Note that this can generally be changed by some compiler switches, and that the most recent versions of the Fortran Package Manager (fpm) considers by default that all sources are free form, regardless the extension.</p>
<p><em>Note: a common misconception is that the <code class="docutils literal notranslate"><span class="pre">.f90</span></code> source files are restricted to the Fortran 90 revision of the standard and cannot contain features introduced in more recent revisions (Fortran 95/2003/2008/2018). <strong>This is wrong and completely unrelated</strong>: the only reason why <code class="docutils literal notranslate"><span class="pre">.f90</span></code> has been chosen is that the free form has been introduced in the Fortran 90 revision. Both <code class="docutils literal notranslate"><span class="pre">.f</span></code> and <code class="docutils literal notranslate"><span class="pre">.f90</span></code> source files can contain features from any revision of the standard.</em></p>
</section>
</section>

<div class="section ablog__blog_comments">
  
  
</div>

              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2020-2022, Fortran Community.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>